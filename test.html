<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>حاسبة كميات الخلطة</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f5f5f5;
    }
    img.header-img, img.footer-img {
      width: 100vw;
      display: block;
    }
    .container {
      max-width: 600px;
      margin: auto;
      padding: 20px;
    }
    .input-section {
      margin: 20px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .input-section label {
      font-size: 1.1em;
      margin-right: 5px;
    }
    .input-section input {
      width: 100px;
      padding: 5px;
      font-size: 1em;
    }
    .input-section button {
      padding: 8px 15px;
      font-size: 1em;
      border: none;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
      border-radius: 5px;
    }
    .input-section button#clear-btn {
      background-color: #f44336;
    }
    .results {
      margin: 20px 0;
      background-color: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .results p {
      font-size: 1.1em;
      margin: 10px 0;
    }
    #whatsapp-btn {
      margin-top: 10px;
      background-color: #25D366;
      border: none;
      color: white;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 5px;
      cursor: pointer;
    }
    .prayer-box, .tips-box {
      margin: 20px 0;
      background-color: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      font-size: 1.2em;
      font-weight: bold;
    }
    .footer-info {
      margin: 20px 0;
      font-size: 0.9em;
      color: #666;
    }
    @media (max-width: 600px) {
      .input-section {
        flex-direction: column;
      }
      .input-section label, .input-section input, .input-section button {
        width: 100%;
        margin: 5px 0;
      }
    }
  </style>
</head>
<body>
  <img src="head.png" alt="صورة رأس الصفحة" class="header-img">

  <div class="container">
    <div class="input-section">
      <label for="volume">أدخل الحجم:</label>
      <input type="number" id="volume" placeholder="مثلاً: ٢٧٧ ملي" />
      <button id="calc-btn">احسب</button>
      <button id="clear-btn">مسح</button>
    </div>

    <div class="results" id="results" style="display: none;">
      <p>نتائج الخلطة:</p>
      <p>الجبس: <span id="gypsum-result">0</span> جم</p>
      <p>الأسمنت: <span id="cement-result">0</span> جم</p>
      <p>الماء: <span id="water-result">0</span> مل</p>
      <button id="whatsapp-btn">مشاركة على واتساب</button>
    </div>

    <div class="prayer-box" id="prayer-box">
      <p id="prayer-text"></p>
    </div>

    <div class="tips-box" id="tips-box">
      <p id="tips-text"></p>
    </div>

    <div class="footer-info">
      <p>الإصدار 4.0 - جميع الحقوق محفوظة &copy;</p>
    </div>
  </div>

  <img src="footer.png" alt="صورة الفوتر" class="footer-img">
  <audio id="click-sound" src="click.mp3"></audio>

  <script>
    const prayers = [
      "ربنا آتنا في الدنيا حسنة وفي الآخرة حسنة وقنا عذاب النار",
      "اللهم صل على محمد وعلى آل محمد",
      "سبحان الله وبحمده سبحان الله العظيم",
      "اللهم افتح علينا فتوح العارفين",
      "اللهم ارزقنا حلاوة ذكرك وشكرك وحسن عبادتك"
    ];
    const tips = [
      "نصيحة: تأكد من دقة القياس للحصول على خلطة متجانسة.",
      "تذكر أن تضع الخلطة في مكان جيد التهوية.",
      "تأكد من نقاء الماء المستخدم لتحسين جودة الخلطة.",
      "التزم بالقياسات للحصول على أفضل نتائج."
    ];

    document.getElementById('prayer-text').textContent = prayers[Math.floor(Math.random() * prayers.length)];
    document.getElementById('tips-text').textContent = tips[Math.floor(Math.random() * tips.length)];

    document.getElementById('calc-btn').addEventListener('click', function() {
      document.getElementById('click-sound').play();
      const vol = parseFloat(document.getElementById('volume').value);
      if (!vol || vol <= 0) return;

      const gypsum = Math.round(vol * 0.5);
      const cement = Math.round(vol * 0.3);
      const water = Math.round(vol * 0.2);

      document.getElementById('results').style.display = 'block';
      animateValue('gypsum-result', 0, gypsum, 1000);
      animateValue('cement-result', 0, cement, 1000);
      animateValue('water-result', 0, water, 1000);
    });

    document.getElementById('clear-btn').addEventListener('click', function() {
      document.getElementById('click-sound').play();
      document.getElementById('volume').value = '';
      document.getElementById('results').style.display = 'none';
      document.getElementById('gypsum-result').textContent = '0';
      document.getElementById('cement-result').textContent = '0';
      document.getElementById('water-result').textContent = '0';
    });

    document.getElementById('whatsapp-btn').addEventListener('click', function() {
      document.getElementById('click-sound').play();
      const gypsum = document.getElementById('gypsum-result').textContent;
      const cement = document.getElementById('cement-result').textContent;
      const water = document.getElementById('water-result').textContent;
      const text = `نتيجة حساب الخلطة:\nالجبس: ${gypsum} جم\nالأسمنت: ${cement} جم\nالماء: ${water} مل`;
      const url = "https://api.whatsapp.com/send?text=" + encodeURIComponent(text);
      window.open(url, '_blank');
    });

    function animateValue(id, start, end, duration) {
      const element = document.getElementById(id);
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        element.textContent = Math.floor(progress * (end - start) + start);
        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      };
      window.requestAnimationFrame(step);
    }
  </script>
</body>
</html>
